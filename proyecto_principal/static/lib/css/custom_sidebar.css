/* ============================================================
   ====== REGLAS NECESARIAS PARA EL TOGGLE DE SB ADMIN =======
   ============================================================ */

body.sidebar-toggled #accordionSidebar {
    width: 6.5rem !important;
}

body.sidebar-toggled #accordionSidebar .nav-link span,
body.sidebar-toggled #accordionSidebar .sidebar-heading,
body.sidebar-toggled #accordionSidebar .sidebar-brand-text {
    display: none !important;
}

body.sidebar-toggled #accordionSidebar .sidebar-divider {
    display: none !important;
}

/* ============================================================
   ====== 1. ESTADO COLAPSADO (PANTALLAS GRANDES) =============
   ============================================================ */

.sidebar.toggled .nav-link span,
.sidebar.toggled .sidebar-heading,
.sidebar.toggled .sidebar-brand-text {
    display: none !important;
}

.sidebar.toggled {
    width: 6.5rem !important;
}

.sidebar.toggled .nav-link {
    text-align: center;
    padding: 0.75rem 1rem;
    width: 6.5rem;
}

.sidebar.toggled .nav-link i {
    font-size: 1rem;
    margin-right: 0 !important;
}

.sidebar.toggled .sidebar-brand {
    padding: 0.5rem;
}

.sidebar.toggled .sidebar-brand img {
    width: 90px !important;
    height: 90px !important;
}

.sidebar.toggled .sidebar-divider {
    display: none !important;
}

.sidebar.toggled .collapse,
.sidebar.toggled .dropdown-submenu {
    display: none !important;
}

.sidebar {
    transition: width 0.3s ease, left 0.35s ease;
}

.sidebar .nav-link span,
.sidebar .sidebar-heading {
    transition: opacity 0.2s ease;
}

.sidebar.toggled .nav-link span,
.sidebar.toggled .sidebar-heading {
    opacity: 0;
}

/* Expandir al pasar el mouse */
.sidebar.toggled:hover {
    width: 14rem !important;
}

.sidebar.toggled:hover .nav-link span,
.sidebar.toggled:hover .sidebar-heading,
.sidebar.toggled:hover .sidebar-brand-text {
    display: inline !important;
    opacity: 1 !important;
}

.sidebar.toggled:hover .sidebar-divider {
    display: block !important;
}

.sidebar.toggled:hover .collapse {
    display: none;
}

.sidebar.toggled:hover .collapse.show {
    display: block !important;
}

/* ============================================================
   ====== 2. SIDEBAR FLOTANTE SOLO EN PC (≥901px) =============
   ============================================================ */

@media (min-width: 901px) {
    #accordionSidebar {
        position: fixed;
        top: 20px;
        bottom: 20px;
        left: 20px;
        height: calc(100vh - 40px) !important;
        border-radius: 20px;
        overflow-y: auto;
        z-index: 999;
        box-shadow: 0px 10px 30px rgba(0,0,0,0.2);
        transition: width 0.3s ease, left 0.35s ease;
    }

    #content-wrapper {
        margin-left: 120px;
        padding: 20px;
        transition: margin-left 0.3s ease;
        background: transparent !important;
    }

    #accordionSidebar.toggled:hover ~ #content-wrapper {
        margin-left: 260px;
    }
}

/* ============================================================
   ====== 3. SUBMENÚ DESPLEGABLE CON ANIMACIONES ==============
   ============================================================ */

.sidebar .dropdown-menu {
    position: static !important;
    float: none !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0.3rem 0 !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

.sidebar .dropdown-submenu {
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transition: max-height 0.25s ease, opacity 0.25s ease;
}

.sidebar .nav-item.dropdown:hover .dropdown-submenu {
    max-height: 200px;
    opacity: 1;
    display: block !important;
}

.sidebar .dropdown-item {
    padding-left: 2.5rem !important;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    color: #fff !important;
    background-color: transparent !important;
    transition: background-color 0.2s ease;
}

.sidebar .dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
}

.sidebar.toggled:hover .nav-item.dropdown:hover .dropdown-submenu {
    display: block !important;
    max-height: 200px;
    opacity: 1;
}

/* ============================================================
   ====== 4. RESPONSIVE – OFFCANVAS PARA MÓVILES <900PX =======
   ============================================================ */

@media (max-width: 900px) {

    #accordionSidebar {
        position: fixed;
        top: 20px !important;
        left: -260px;              /* Oculta */
        width: 240px !important;
        height: calc(100vh - 40px) !important;
        border-radius: 12px;
        box-shadow: 6px 0 20px rgba(0,0,0,0.25);
        background-color: #2d2d2d !important;
        transition: left 0.35s ease-in-out;
        z-index: 9999;
    }

    /* Cuando el botón hamburguesa agrega .show */
    #accordionSidebar.show {
        left: 20px;               /* Se desliza */
    }

    #content-wrapper {
        margin-left: 0 !important;
        padding: 15px;
    }

    /* En móvil siempre expandida */
    .sidebar.toggled .nav-link span,
    .sidebar.toggled .sidebar-heading,
    .sidebar.toggled .sidebar-brand-text {
        display: inline !important;
        opacity: 1 !important;
    }

    .sidebar .nav-item.dropdown:hover .dropdown-submenu {
        display: block !important;
        max-height: 200px;
        opacity: 1;
    }
}
